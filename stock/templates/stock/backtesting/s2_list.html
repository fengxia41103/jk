{% extends "stock/backtesting/list.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block page-header %}
Backtesting 2
{% endblock %}

{% block strategy-intro %}
<p>
Backtesting 2 strategies pre-compute a val_by_strategy for each historical record. Based on the strategy and specified cutoff values, it simulates trades and generate a report.

<h3>Data source</h3>
	<ul>
		<li> S&P 500
		<li> Chenmin sector data &larr; stock symbol starts with "CI00"
	</ul>

<h3>Trading strategy</h3>
<h4>Strategy 2: by daily ranking</h4>
<p>
Given a date, we rank samples by precomputed "val_by_strategy". We buy symbols whose rank is <= buy_cutoff * len(symbols); and we sell symbols whose rank >= sell_cutoff * len(symbols).

<p>
Rank defaults to ascending order. The meaning of it depends on how "val_by_strategy" is calculated. Eg. val_by_strategy = (open[t0] - adj_close[t0-1])/adj_close[t0-1], ascending order means we will buy stock whose price has dropped the most on t0 &rarr; we chase losers; descending order would reverse this logic &rarr; we chase winners.

<h4>Strategy 2: buy low sell high</h4>
<p>
Give a date, we precompute its "oneday_change_pcnt = (open[t0] - adj_close[t0-1])/adj_close[t0-1]". If this value is negative and is less than -1*buy_cutoff, we buy; then hold till this stock's price went above "cost*(1+sell_cutoff)". Eg. buy_cutoff=0.04 &rarr; we buy stock whose drop is greater than 4%; sell_cutoff=0.05 &rarr; we sell position when its daily price is > (1+0.05)*cost.

<p>
For this strategy, sorting is irrelevant.
{% endblock %}

{% block strategy-control %}
<form action="{% url 'backtesting_2' %}" class="uniForm" method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <input type="submit" value="Submit" />
</form>
{% endblock %}

